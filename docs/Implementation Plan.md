# Implementation Plan: Mutabor

Этот документ описывает последовательность разработки и внедрения функционала. Он служит дорожной картой для команды.

## Этап 1: Базовый MVP и настройка окружения (ЗАВЕРШЕНО)
- **Статус:** ✅ Выполнено

## Этап 2: Стабилизация и Устранение Технического Долга (ЗАВЕРШЕНО)
- **Статус:** ✅ Выполнено

## Этап 3: Повышение Покрытия Тестами (ОТЛОЖЕНО)
- **Статус:** ⏸️ Отложено
- **Цель:** Достичь приемлемого уровня покрытия тестами для основных частей системы.
- **Примечание:** Эта задача будет выполняться параллельно с разработкой нового функционала или после завершения Этапа 5.

---

## Этап 4: Внедрение Платформы Автоматизации (ТЕКУЩИЙ)
- **Статус:** ⏳ В работе
- **Цель:** Превратить Mutabor из таск-трекера в платформу для автоматизации разработки путем интеграции с Git, AI и CI/CD.

### Блок 4.1: Основы Git-интеграции и "Артефакты"
**Цель блока:** Научить систему работать с файлами в репозитории проекта.

| Исполнитель | Задача                                                                              | Статус |
|:-----------:|:------------------------------------------------------------------------------------|:------:|
|   Backend   | `[DB]` Создать миграцию для добавления полей `git_repository_url` и `encrypted_git_pat` в `projects`. |  `[ ]` |
|   Backend   | `[API]` Реализовать эндпоинты в `ProjectSettingsController` для CRUD-операций с настройками Git.     |  `[ ]` |
|  Frontend   | `[UI]` В настройках проекта добавить поля для ввода URL репозитория и Personal Access Token. |  `[ ]` |
|   Backend   | `[CORE]` Создать `GitService` для клонирования/пулла репозиториев и коммита/пуша изменений. |  `[ ]` |
|   Backend   | `[API]` Создать эндпоинты для чтения/записи файлов в привязанном репозитории.       |  `[ ]` |
|  Frontend   | `[UI]` Создать виджет `ArtifactEditor` для отображения и редактирования файлов из Git.     |  `[ ]` |

### Блок 4.2: AI-Агенты
**Цель блока:** Внедрить сущность "Агент" и научить систему выполнять LLM-запросы от его имени.

| Исполнитель | Задача                                                                              | Статус |
|:-----------:|:------------------------------------------------------------------------------------|:------:|
|   Backend   | `[DB]` Создать миграцию для таблицы `agent_configs` и добавить `role='agent'` в `users`. |  `[ ]` |
|   Backend   | `[CORE]` Создать `AgentsService` для управления агентами.                               |  `[ ]` |
|   Backend   | `[API]` Модифицировать `AiService` для работы с конфигурацией конкретного агента.     |  `[ ]` |
|  Frontend   | `[UI]` Создать вкладку "Agents" в настройках проекта для CRUD-операций с агентами.    |  `[ ]` |

### Блок 4.3: Ядро Автоматизации
**Цель блока:** Создать движок для выполнения цепочек действий по триггерам.

| Исполнитель | Задача                                                                              | Статус |
|:-----------:|:------------------------------------------------------------------------------------|:------:|
|   Backend   | `[DB]` Создать миграции для таблиц `automations` и `automation_actions`.            |  `[ ]` |
|   Backend   | `[CORE]` Создать `AutomationService` для выполнения цепочек действий.                   |  `[ ]` |
|   Backend   | `[CORE]` В `TasksService` интегрировать вызов `AutomationService` при смене колонки.    |  `[ ]` |
|  Frontend   | `[UI]` Создать вкладку "Automations" в настройках проекта с конструктором цепочек.    |  `[ ]` |

### Блок 4.4: Интеграция с CI/CD
**Цель блока:** Реализовать безопасный запуск тестов через внешние системы.

| Исполнитель | Задача                                                                              | Статус |
|:-----------:|:------------------------------------------------------------------------------------|:------:|
|   Backend   | `[CORE]` В `AutomationService` реализовать действие `RUN_CI_PIPELINE` (отправка вебхука). |  `[ ]` |
|   Backend   | `[API]` Создать эндпоинт для приема колбэков от CI/CD систем.                         |  `[ ]` |
|   Backend   | `[CORE]` Реализовать логику обработки колбэка (комментарий в задачу, перемещение).   |  `[ ]` |
|  Frontend   | `[UI]` В конструкторе автоматизаций добавить настройку для действия `RUN_CI_PIPELINE`. |  `[ ]` |
